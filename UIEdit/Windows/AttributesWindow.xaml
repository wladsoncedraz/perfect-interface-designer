<Window x:Class="UIEdit.Windows.AttributesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:UIEdit.Windows"
        Title="Attributes" Height="420" Width="500" WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        Background="{DynamicResource Color.SecondaryBackground}" Foreground="{DynamicResource Color.Text}">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>
    <Grid Margin="8" Background="{DynamicResource Color.SecondaryBackground}">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <DataGrid x:Name="GridAttrs" AutoGenerateColumns="False" HeadersVisibility="Column" CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="False"
                  Background="{DynamicResource Color.SecondaryBackground}" Foreground="{DynamicResource Color.Text}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" IsReadOnly="True" Width="*"/>
                <DataGridTemplateColumn Header="Value" Width="2*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <local:ImagePropertyControl Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                           SurfacesPath="{Binding DataContext.SurfacesPath, RelativeSource={RelativeSource AncestorType=Window}}"
                                                           Visibility="{Binding IsImageProperty, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                                <TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         Background="{DynamicResource Color.SecondaryBackground}"
                                         Foreground="{DynamicResource Color.Text}"
                                         BorderBrush="Transparent">
                                    <TextBox.Style>
                                        <Style TargetType="TextBox">
                                            <Setter Property="Visibility" Value="Visible"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsImageProperty}" Value="True">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
            <Button Content="Ok" Width="80" Margin="0,0,8,0" IsDefault="True" Click="OnOk" Background="{DynamicResource Color.SecondaryBackground}" Foreground="{DynamicResource Color.Text}"/>
            <Button Content="Cancel" Width="80" IsCancel="True" Background="{DynamicResource Color.SecondaryBackground}" Foreground="{DynamicResource Color.Text}"/>
        </StackPanel>
    </Grid>
</Window>

